diff --git a/Makefile b/Makefile
index 06bc90e..9aec31c 100644
--- a/Makefile
+++ b/Makefile
@@ -6,11 +6,11 @@ DEPDIR = .deps
 
 UNRARDIR = unrar
 
-CXX = g++
+CXX? = g++
 STRIP = strip
 
-CXXFLAGS = -O2
-CXXFLAGS += -c -fPIC
+CXXFLAGS += -O2
+CXXFLAGS += -fPIC
 CXXFLAGS += -Wall \
 	    -Wno-parentheses \
 	    -Wno-switch \
@@ -23,8 +23,6 @@ ifeq ($(DEBUG),1)
 CXXFLAGS += -g -DDEBUG
 endif
 
-LDFLAGS = -shared -fPIC -pthread
-
 BIN = $(APP).so
 
 UNRAR_OBJS = filestr.o recvol.o rs.o scantree.o qopen.o
@@ -81,20 +79,20 @@ vpath %.hpp $(UNRARDIR)
 all: $(BIN)
 
 $(BIN): $(addprefix $(OBJDIR)/,$(OBJS))
-	$(CXX) $(LDFLAGS) $^ -o $@
+	$(CXX) -shared $(CXXFLAGS) -o $@ $^ $(CXX_LDFLAGS) $(LDFLAGS)
 ifneq ($(DEBUG),1)
 	$(STRIP) $@
 endif
 
 vpath %.o $(OBJDIR)
 $(OBJDIR)/%.o: %.cpp | $(OBJDIR)
-	$(CXX) $(CXXFLAGS) $< -o $@
+	$(CXX) $(CXXFLAGS) $(LDFLAGS) -c $< -o $@
 $(OBJDIR):
 	-mkdir -p $@
 
 vpath %.d $(DEPDIR)
 $(DEPDIR)/%.d: %.cpp | $(DEPDIR)
-	$(CXX) $(CXXFLAGS) -MM $< > $@
+	$(CXX) $(CXXFLAGS) $(LDFLAGS) -c -MM $< > $@
 	sed -i 's,\($*\)\.o[ :]*,\1.o $*.d: ,g' $@
 $(DEPDIR):
 	-mkdir -p $@
